<?php
/*
	DealMe Category form builder
	Fix Later:
		Will take a location and return what categories are available in that location
		instead of returning all categories
		Sub Categories
	
	Example:
	$searchFilters = new m_Category();
	echo '<form id="search">';
	echo $searchFilters->getLocations();
	echo $searchFilters->getCategories();
	echo "</form>";
	echo '<button type="submit" formmethod="post" formaction="class.php" form="search">Submit</button>';
*/

class m_Category {
	/*
		Properties
	*/
	private $categories = "";
	private $locations = "";
	
	/*
		Methods
		foreach($_GET['currency'] as $currency){
  echo $currency."<br/>";
  //or what ever
}
	*/
	public function __construct(){
		//queries all locations and categories
		m_Find::result(m_var::get_database(),m_var::get_locations());
		$loc = m_Find::get_results();
		m_Find::result(m_var::get_database(),m_var::get_categories());
		$cat = m_Find::get_results();
		$this->build($loc,$cat);
	}
	
	public function getLocations(){
		return $this->locations;
	}
	
	public function getCategories(){
		return $this->categories;
	}
	
	/*
		Private Methods
	*/
	private function build($loc,$cat){
		// locations
		$this->locations = 
		'<label for="location">Search City:</label><select name="location"><option value="">Select One...</option>';
		foreach($loc as $doc){
			$this->locations .='<option value="'.$doc['_id'].'">'.$doc['_id'].'</option>';
		}
		$this->locations .='</select>';
		
		// categories
		foreach($cat as $doc1){
			$this->categories .='
			<div class="checkbox">
			<label form="'.$doc1['_id'].'">
				<input type="checkbox" name="category[]" value="'.$doc1['_id'].'" id="'.$doc1['_id'].'" checked>'.$doc1['_id'].'
			</label>'."\r\n</div>";
		}
	}
}

?>